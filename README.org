#+title: magit-git-toolbelt
#+author: Jonathan Chu
#+email: me@jonathanchu.is

[[https://melpa.org/#/magit-git-toolbelt][https://melpa.org/packages/magit-git-toolbelt-badge.svg]]

~magit-git-toolbelt~ is an Emacs package that integrates [[https://github.com/nvie][@nvie's]] [[https://github.com/nvie/git-toolbelt][git-toolbelt]] CLI utility into [[https://magit.vc/][Magit]]. It provides a Transient menu interface to access ~git-toolbelt~ commands directly from Emacs without leaving your workflow.

Features include:
  - Branch management (cleanup merged branches, list recent/local/remote branches)
  - Commit info (initial commit, current branch, SHA)
  - Diff & inspection (modified, untracked)
  - Merge status (merged, unmerged)
  - Actions (undo last commit)

** Requirements

  - Emacs 26.1+
  - Magit 3.0.0+
  - git-toolbelt ([[https://github.com/nvie/git-toolbelt?tab=readme-ov-file#installation-instructions][installed separately]])

* Installation

Install from MELPA:

=M-x package-install RET magit-git-toolbelt RET=

Or with ~use-package~:

#+begin_src emacs-lisp
(use-package magit-git-toolbelt
  :ensure t
  :after magit)
#+end_src

* Usage

You can access ~magit-git-toolbelt~ from the *Magit status menu* by typing ~\~ or ~m-x magit-git-toolbelt~.

If you don't like the ~\~ key binding to invoke ~magit-git-toolbelt~, you can set any custom value you want. Note that the variable must be set *before* the package loads:

#+begin_src emacs-lisp
(use-package magit-git-toolbelt
  :ensure t
  :after magit
  :init
  (setq magit-git-toolbelt-key ".")) ; Example setting key to "." instead of the default "\"
#+end_src

The Transient menu is organized into Quick Commands, Submenus, and Actions:

#+begin_example
magit-git-toolbelt
├── Quick Commands
│   ├── c  Cleanup merged branches
│   ├── r  Recent branches
│   └── a  Active branches
├── Submenus
│   ├── C  Commit Info...
│   │   ├── i  Initial commit
│   │   ├── s  Current SHA
│   │   └── l  Local commits
│   ├── B  Branches...
│   │   ├── l  Local branches
│   │   ├── b  Current branch
│   │   ├── m  Main branch
│   │   ├── r  Remote branches
│   │   └── t  Remote tracking branch
│   ├── M  Merge Status...
│   │   ├── m  Merged
│   │   ├── u  Unmerged
│   │   └── s  Merge status
│   └── D  Diff & Inspection...
│       ├── m  Modified files
│       └── u  Untracked files
└── Actions
    └── z  Undo last commit
#+end_example

* Screenshots

#+CAPTION: magit-git-toolbelt, git-toolbelt, magit
#+NAME: Magit Git Toolbelt Screenshot
[[https://raw.githubusercontent.com/jonathanchu/magit-git-toolbelt/refs/heads/main/screenshots/20260131_magit_git_toolbelt_screenshot.png]]
/Screenshot of magit-git-toolbelt from the Magit status menu/

#+CAPTION: magit-git-toolbelt, git-toolbelt, magit
#+NAME: Magit Git Toolbelt Cleanup Screenshot
[[https://raw.githubusercontent.com/jonathanchu/magit-git-toolbelt/refs/heads/main/screenshots/20260131_magit_git_toolbelt_cleanup_screenshot.png]]
/Screenshot of magit-git-toolbelt cleanup submenu/

* Feature Status

There are still a lot of commands left to integrate into this interface as this first pass initially aims to integrate the commands that simply return information. Some of these commands are covered natively in Magit, so there is not a big need to create the interface to it here unless it offers novel functionality. The goal of ~magit-git-toolbelt~ is to extend and enhance the Magit experience, not to replicate or reinvent functionality that Magit already handles well.

** Everyday helpful commands:
  - [X] git-cleanup
  - [X] git-current-branch
  - [ ] git-main-branch
  - [ ] git-fixup
  - [ ] git-fixup-with
  - [X] git-active-branches
  - [ ] git-diff-since
  - [X] git-local-branches
  - [X] git-local-commits
  - [ ] git-local-merges
  - [X] git-merged / git-unmerged / git-merge-status
  - [ ] git-branches-containing
  - [X] git-recent-branches
  - [X] git-remote-branches
  - [X] git-remote-tracking-branch
  - [ ] git-repo
  - [ ] git-root
  - [X] git-initial-commit
  - [X] git-sha
  - [ ] git-stage-all
  - [ ] git-unstage-all
  - [ ] git-update-all
  - [ ] git-workon
  - [X] git-modified
  - [ ] git-modified-since
  - [ ] git-separator
  - [ ] git-spinoff
  - [ ] git-wip

** Statistics:
  - [ ] git-committer-info

** Commands to help novices out:
  - [ ] git-drop-local-changes
  - [ ] git-stash-everything
  - [ ] git-push-current
  - [X] git-undo-commit
  - [ ] git-undo-merge

** Advanced usage:
  - [ ] git-skip / git-unskip / git-show-skipped
  - [ ] git-commit-to
  - [ ] git-cherry-pick-to
  - [ ] git-delouse
  - [ ] git-shatter-by-file
  - [ ] git-cleave

* Contributing

Contributions are welcome! If you'd like to help integrate additional ~git-toolbelt~ commands or improve existing functionality, please open a pull request.

Before submitting a PR, please keep in mind that this package is intended to extend Magit with useful ~git-toolbelt~ functionality -- not to duplicate what Magit already provides. If you're unsure whether a command is a good fit, feel free to open an issue to discuss it first.

To report bugs or request features, please use the [[https://github.com/jonathanchu/magit-git-toolbelt/issues][GitHub issue tracker]].
